---
slug: troubleshooting-pandoc-problems-as-an-r-user
title: R√©soudre ses probl√®mes de Pandoc en tant qu'utilisateur¬∑rice de R
author:
- Ma√´lle Salmon
- Christophe Dervieux
date: '2023-06-01'
tags:
- pandoc
- rmarkdown
- publication
- quarto
- markdown
- tech notes
description: "Comment r√©soudre ses probl√®mes Pandoc gr√¢ce √† la lecture de documentation,
  l'exp√©rimentation... et un peu d'exp√©rience \U0001F605."
---

_Merci √† [Hugo Gruson](/author/hugo-gruson) pour ses commentaires utiles sur cette traduction!_

Le logiciel libre Pandoc par [John MacFarlane](https://johnmacfarlane.net/) est un outil tr√®s utile : par exemple, Yanina Bellini Saibene, community manager de rOpenSci, a r√©cemment demand√© √† Ma√´lle si elle pouvait convertir un document Google en livre Quarto.
Ma√´lle a r√©pondu √† la demande en combinant Pandoc (conversion de docx en HTML puis en Markdown par le biais de [`pandoc::pandoc_convert()`](https://cderv.github.io/pandoc/reference/pandoc_convert.html)) et XPath.
Tu peux trouver le paquet exp√©rimental qui en r√©sulte, [quartificate](https://github.com/ropenscilabs/quartificate), sur GitHub.
Pandoc n'est pas seulement utile de mani√®re anecdotique : il est utilis√© par [R Markdown](https://rmarkdown.rstudio.com/) et par [Quarto](https://quarto.org/).
Alors, que tu jongles avec des documents de diff√©rents formats ou que tu cherches simplement √† publier tes analyses reproductibles, tu as peut-√™tre utilis√© Pandoc (m√™me si tu ne le savais pas !), ou peut-√™tre que tu... *devrais* utiliser Pandoc.

Parfois, tout se passe bien, parfois, tu penses √† Pandoc parce qu'il semble √™tre la source d'une erreur.
Dans ces cas-l√†, Ma√´lle, qui a assist√© au travail de d√©tective de Christophe[^1] dans plusieurs _issues_ GitHub, a tendance √† se demander "Que ferait Christophe ?".
La r√©ponse est probablement "lire la doc et enqu√™ter".
Dans ce billet, nous rassemblons des ressources et des astuces pour t'aider √† d√©panner tes soucis Pandoc en tant qu'utilisateur¬∑rice de R.

[^1]: Si tu veux lire des exemples de d√©pannage, vois ceci: [_issue_ dans rmarkdown](https://github.com/rstudio/rmarkdown/issues/2437) et [l'_issue_ correspondante de Pandoc](https://github.com/jgm/pandoc/issues/8499); ou ceci [Question pandoc](https://github.com/jgm/pandoc/issues/7352).

## Pandoc 101

Supposons que nous ayons un fichier Markdown et que nous voulons le convertir en HTML.
Nous pouvons le faire √† partir de R en appelant la fonction [`pandoc::pandoc_convert()`](https://cderv.github.io/pandoc/reference/pandoc_convert.html)[^2] qui est une interface Pandoc pour R.
Si tu pr√©f√®res le terminal, l'interface en ligne de commande [`pandoc`](https://pandoc.org/MANUAL.html) te sera utile.
Dans la suite de ce billet, nous utiliserons le paquet R pandoc pour les exemples.

[^2]: Le paquet R pandoc[https://github.com/cderv/pandoc](https://github.com/cderv/pandoc) est un d√©veloppement assez r√©cent et permet d'acc√©der √† l'interface de programmation Pandoc √† partir de R.
Tu peux aussi utiliser la m√©thode plus habituelle [`rmarkdown::pandoc_convert()`](https://pkgs.rstudio.com/rmarkdown/reference/pandoc_convert.html) pour acc√©der √† Pandoc utilis√© avec R Markdown.


```r
# Cr√©ons un fichier temporaire d'exemple Markdown
md_lines <- c(
  "# Important announcement", "",
  "[Pandoc](https://pandoc.org/) is **great**!"
)
md_file <- withr::local_tempfile()
brio::write_lines(md_lines, md_file)

# Convertissons-le en un fichier temporaire HTML
html_file <- withr::local_tempfile()
pandoc::pandoc_convert(
  file = md_file, 
  from = "markdown", 
  to = "html", 
  output = html_file
)
```

```
## /tmp/Rtmp1xdbdw/file273fd5b95f546
```

```r
# Lisons le r√©sultat !
brio::read_lines(html_file)
```

```
## [1] "<h1 id=\"important-announcement\">Important announcement</h1>"
## [2] "<p><a href=\"https://pandoc.org/\">Pandoc</a> is"             
## [3] "<strong>great</strong>!</p>"
```

Cette magie de **passer d'un langage de balisage √† un autre** est le travail de Pandoc.
Pandoc prend en charge de nombreux formats d'entr√©e et de sortie, avec des r√©glages disponibles pour divers √©l√©ments.

Par exemple, nous pourrions modifier l√©g√®rement l'appel pour ne pas obtenir d'identifiant pour l'en-t√™te h1 dans le HTML (c'est-√†-dire supprimer l'√©l√©ment `id` de l'en-t√™te `<h1>` ).


```r
pandoc::pandoc_convert(
  file = md_file, 
  from = "markdown-auto_identifiers", 
  to = "html", 
  output = html_file
)
```

```
## /tmp/Rtmp1xdbdw/file273fd5b95f546
```

```r
brio::read_lines(html_file)
```

```
## [1] "<h1>Important announcement</h1>"                 
## [2] "<p><a href=\"https://pandoc.org/\">Pandoc</a> is"
## [3] "<strong>great</strong>!</p>"
```

Ce n'est qu'un aper√ßu de ce que Pandoc peut faire.

## Quand Pandoc est-il le probl√®me (ou la solution) ?

Si tu fais appel √† Pandoc toi-m√™me, directement ou par l'interm√©diaire de [pandoc](https://cderv.github.io/pandoc/) de Christophe, tu sauras √©videmment que Pandoc est impliqu√© dans le processus.

Dans d'autres cas, Pandoc peut √™tre enfoui sous des couches d'autres logiciels.
Par exemple, avec R Markdown, le paquet rmarkdown appellera d'abord knitr avant d'appeler Pandoc.
M√™me chose avec Quarto qui appellera knitr ou jupyter avant d'appeler Pandoc.

Voici quelques √©l√©ments pour t'aider √† d√©terminer si c'est Pandoc qui te fait tr√©bucher :

- Si tu obtiens une erreur avec ton code R, Pandoc n'est pas en cause.

- Si tu peux voir une erreur Pandoc dans la sortie, cela signifie g√©n√©ralement que quelque chose ne va pas pendant l'√©tape de conversion Pandoc.
  Le d√©bogage √† l'aide du fichier d'entr√©e transmis √† Pandoc sera le plus facile.
  Si l'outil que tu utilises cr√©e cette entr√©e pour toi (comme R Markdown ou Quarto), ajoute la configuration pour conserver l'entr√©e Markdown. Lis la sous-section suivante pour plus de d√©tails !

- Si tu te dis "mais √ßa marchait hier !", par exemple "je n'ai rien chang√© du c√¥t√© de R mais √ßa ne marche plus" : peut-√™tre que la version de Pandoc a chang√© ? 
Un changement de version de Pandoc, peut-√™tre en utilisant [la fonctionnalit√© du paquet pandoc pour g√©rer la version de Pandoc](https://cderv.github.io/pandoc/reference/index.html#handle-pandoc-version), par exemple, peut r√©v√©ler un probl√®me avec une nouvelle version de Pandoc, mais c'est rare.

Dans tous les cas, Pandoc peut aussi √™tre ton probl√®me si tu repousses les limites de ce que tu peux r√©aliser avec un autre outil en utilisant Pandoc.
Par exemple, si tu veux une conversion particuli√®re, comme avoir des emojis √† la `:‚Äãgrin:` dans tes diapositives Quarto reveal.js, tu devras peut-√™tre modifier quelque chose li√© √† Pandoc.

### Comment acc√©der √† l'entr√©e de Pandoc

M√™me si Pandoc est un convertisseur g√©n√©rique qui peut g√©rer plusieurs formats en entr√©e et en sortie, dans l'√©cosyst√®me R Markdown et Quarto, le format d'entr√©e sera toujours Markdown par le biais d'un fichier `.md`.

Lorsque l'on utilise un `.Rmd` ou un `.qmd` le document sera converti en `.md` par knitr avec tout le code et les r√©sultats assembl√©s.
C'est l'entr√©e que Pandoc utilisera pour convertir le document en sortie souhait√©e.
Le _cookbook_ (livre de recettes) R Markdown de Yihui Xie, Christophe Dervieux et Emily Riederer propose un [diagramme pratique](https://bookdown.org/yihui/rmarkdown-cookbook/rmarkdown-process.html) pour comprendre cette relation.

En g√©n√©ral, les outils de ce type ont une certaine configuration qui te permet de garder les interm√©diaires pour d√©boguer plus facilement : `keep_md` ou `keep-md` respectivement pour les formats R Markdown et Quarto.

L'exploration de ce fichier interm√©diaire en entr√©e de Pandoc peut aider √† comprendre ce qui sera vu par Pandoc et peut t'aider √† d√©boguer, ou au moins √† construire un meilleur exemple reproductible de ton probl√®me.

## Parler Pandoc

Maintenant que tu comprends la relation entre R et Pandoc, l'√©tape suivante consiste √† comprendre le fonctionnement de Pandoc.
Pensais-tu que nous n'irions pas aussi loin ?
Malheureusement, c'est lorsqu'on commence √† explorer le fonctionnement d'un outil que toute la... *magie* se d√©voile üòâ .

Tout d'abord, comment trouver la documentation de Pandoc ?
Tu peux taper [`pandoc::pandoc_browse_manual()`](https://cderv.github.io/pandoc/reference/pandoc_browse_manual.html).
Ou tu peux mettre un signet sur la page [URL du manuel Pandoc](https://pandoc.org/MANUAL.html).
Il s'agit d'un MANUEL tout en majuscules, ce qui souligne l'importance de le lire : si tu le parcours au moins une fois, tu auras une meilleure id√©e de ce qu'il contient... et de la fa√ßon dont les choses sont r√©f√©renc√©es dans le monde Pandoc, de sorte que tu pourras poser de meilleures questions √† ton moteur de recherche ou √† tes collaborateur¬∑rice¬∑s !
Tu peux m√™me √™tre [r√©compens√© pour avoir lu le MANUEL Pandoc](https://yihui.org/en/2017/11/thanks-tj-mahr/) !

Ensuite, comment apprendre √† "parler Pandoc" ?

Tu peux utiliser un moteur de recherche pour affiner tes mots-cl√©s : tu trouveras peut-√™tre des fils de discussion avec des questions pos√©es par des personnes utilisant le m√™me vocabulaire approximatif que le tien, avec des r√©ponses plus affin√©es.
Par exemple, Ma√´lle cherchait r√©cemment une option dont elle connaissait l'existence, pour transformer des choses qui ressemblent √† des URL en Markdown, comme `https://ropensci.org`, en liens en HTML, par exemple `<a href="https://ropensci.org">https://ropensci.org</a>`.
Elle a d'abord cherch√© des "raw/naked links", avant de (re)d√©couvrir qu'il s'agit de _bare URIs_, avec l'extension appel√©e `autolink_bare_uris`.

En parlant d'extension !
Quel est le vocabulaire de base dont on a besoin pour r√©soudre un probl√®me avec Pandoc ?
Cela vient avec le temps mais une bonne liste de d√©part serait...

### Formats

Le format que Pandoc convertit depuis et vers.
Il y a une liste impressionnante sur le site [page d'accueil de Pandoc](https://pandoc.org/).
docx, gfm (GitHub flavored Markdown), HTML, RTF...

Dans Quarto et R Markdown, tu es cens√©¬∑e √©crire par d√©faut en "Pandoc's Markdown", qui est une variante sp√©ciale de Markdown.

### Extension

Les [Extensions](https://pandoc.org/MANUAL.html#extensions) modifient le comportement des lecteurs et des r√©dacteurs de Pandoc.
Les extensions sont des prolongements (ou des contractions, puisqu'elles peuvent √™tre d√©sactiv√©es) de *formats* et non de *Pandoc*.
Par exemple, ["smart"](https://pandoc.org/MANUAL.html#extension-smart) interpr√©tera certains √©l√©ments typographiques, par exemple deux tirets en tiret long[^4], et est activ√©e par d√©faut pour Markdown.
Donc, si tu veux convertir du Markdown en HTML sans transformer les deux tirets, tu utiliseras `markdown-smart` comme format d'entr√©e.
Cela signifie que `markdown` *moins* l'extension `smart`.
Toutes les extensions ne fonctionnent pas pour un format, alors assure-toi de lire la documentation (üòâ ). Tu peux utiliser [`pandoc::pandoc_list_extensions()`](https://cderv.github.io/pandoc/reference/pandoc_list_extensions.html) pour lister les extensions disponibles pour un format.
Un format que Ma√´lle utilise souvent lorsqu'elle produit des diapositives avec Quarto est le suivant

[^4]: Ma√´lle pensait qu'il s'agissait de "long dashes" en anglais alors qu'on les appelle "em dash" en anglais.
Parler pandoc n√©cessite parfois d'avoir un peu de vocabulaire typographique anglais !

```yaml
format:
  revealjs:  
    from: markdown+emoji
```

pour avoir l'*indispensable* conversion des emojis.
üéâ

Tu trouveras ci-dessous un exemple dans lequel nous appelons directement Pandoc.
Note que dans cet exemple, nous utilisons directement des cha√Ænes de texte, sans rien √©crire dans des fichiers, ce qui peut √™tre pratique parfois !


```r
# tiret long
pandoc::pandoc_convert(
  text = "I like Pandoc -- when it works as I want it to!",
  from = "markdown",
  to = "html"
)
```

```
## <p>I like Pandoc ‚Äì when it works as I want it to!</p>
```

```r
# pas de tiret long
pandoc::pandoc_convert(
  text = "I like Pandoc -- when it works as I want it to!",
  from = "markdown-smart",
  to = "html"
)
```

```
## <p>I like Pandoc -- when it works as I want it to!</p>
```

G√©n√©ralement, en utilisant R Markdown ou Quarto, il n'y a pas besoin de modifier les extensions mais elles peuvent √™tre la source des ennuis ou des diff√©rences que tu vois parfois.

### Options

Tu vois comment nous nous sommes abstenus de qualifier les extensions d'"options" ? Parce que les [options](https://pandoc.org/MANUAL.html#options) sont autre chose !
Ce sont des sortes d'arguments pour les appels Pandoc.
Par exemple `--mathml` est une option pour rendre les math√©matiques en MathML.

Certaines options peuvent √™tre cach√©es par l'outil que tu utilises pour appeler Pandoc, ou facilement expos√©es en tant qu'argument : par exemple, l'option `to` de l'argument [`pandoc::pandoc_convert()`](https://cderv.github.io/pandoc/reference/pandoc_convert.html) est en fait une option Pandoc.

Ci-dessous, nous utilisons une option pour d√©caler les niveaux d'en-t√™te de 1, ce qui augmente le num√©ro de niveau de l'en-t√™te et r√©duit ainsi l'importance de l'en-t√™te.


```r
pandoc::pandoc_convert(
  text = "# Important announcement\n\nPandoc is cool!",
  from = "markdown",
  to = "HTML", 
  args = c("--shift-heading-level-by=1")
)
```

```
## <h2 id="important-announcement">Important announcement</h2>
## <p>Pandoc is cool!</p>
```

Vois comment l'en-t√™te "Annonce importante" devient un h *2* dans le r√©sultat.

Ces options peuvent √™tre d√©finies avec Pandoc en utilisant le format YAML √† l'aide d'un fichier de d√©fauts, [_defaults file_](https://pandoc.org/MANUAL.html#defaults-files).
Il s'agit d'une autre technique avanc√©e que nous n'aborderons pas en d√©tail... mais tu connais maintenant les _defaults file_[^5].

[^5]: Au fait, c'est ce que Quarto exploite en interne pour que les options YAML du document puissent √™tre transmises √† Pandoc.
Utile √† savoir si tu d√©bogues Pandoc dans Quarto.

### Variables

Les [variables](https://pandoc.org/MANUAL.html#variables) sont les m√©tadonn√©es que tu as peut-√™tre l'habitude de transmettre √† Pandoc via l'en-t√™te YAML (pour R Markdown et Quarto).
Elles seront g√©n√©ralement utilis√©es dans les mod√®les pour choisir un contenu et un comportement sp√©cifiques pour le format de sortie.

Elles peuvent √©galement √™tre pass√©es via la ligne de commande, par exemple la fonction de format de sortie de rmarkdown peut les cr√©er en tant qu'arguments de ligne de commande avec [`rmarkdown::pandoc_variable_arg()`](https://pkgs.rstudio.com/rmarkdown/reference/pandoc_args.html).

### Templates (Mod√®les)

Si tu demandes √† Pandoc de cr√©er un diaporama reveal.js, il le fera en utilisant son [mod√®le par d√©faut](https://github.com/jgm/pandoc-templates/blob/master/default.revealjs).
Le mod√®le est rempli avec ton contenu Markup mais aussi avec des variables comme les noms des auteurs.
Tu peux fournir tes propres [_custom templates_ (mod√®les personnalis√©s)](https://pandoc.org/MANUAL.html#templates) en utilisant l'option `--template`.
[pandoc::pandoc\_export\_template()](https://cderv.github.io/pandoc/reference/pandoc_export_template.html) cr√©e un fichier contenant le mod√®le par d√©faut pour une version sp√©cifique de Pandoc, que tu peux explorer ou utiliser comme point de d√©part pour cr√©er ton propre mod√®le.

### Raw attributes (Attributs bruts)

Supposons que tu aies du HTML brut dans ton document Markdown.
Tu peux le prot√©ger de l'analyse Pandoc en l'enveloppant dans un [_raw attribute_ (attribut brut)](https://pandoc.org/MANUAL.html#generic-raw-attribute).
Ceci est par exemple utilis√© par [hugodown](https://github.com/r-lib/hugodown/pull/53) pour prot√©ger les shortcodes Hugo.

Attention, cela fait partie de l'extension `raw_attribute` et peut donc ne pas √™tre incluse par d√©faut et ne pas √™tre prise en charge par le format que tu as choisi.

### Comment utiliser ces choses ?

Ce dont tu as besoin pour r√©soudre un d√©fi Pandoc donn√© peut √™tre un format, une extension ou une option.
C'est √† toi de trouver la bonne combinaison, mais avoir une vague compr√©hension de ce que sont ces choses et comment les utiliser t'aidera.
Une autre chose qui t'aidera, c'est de savoir comment passer ces choses √† Pandoc en utilisant l'interface Pandoc de ton choix :

- Si tu appelles Pandoc directement ou avec le paquetage pandoc, cela devrait √™tre relativement simple (voir les liens et les exemples ci-dessus).
- Si tu utilises R Markdown ou Quarto, tu devras peut-√™tre rechercher, par exemple [_"R Markdown custom Pandoc templates"_ (mod√®les Pandoc personnalis√©s pour R Markdown)](https://bookdown.org/yihui/rmarkdown/template-pandoc.html). Par ailleurs, il existe peut-√™tre une fa√ßon plus native d'utiliser R Markdown ou Quarto pour atteindre ton objectif sans avoir √† utiliser Pandoc. Il est important de garder √† l'esprit que ces outils exploitent largement Pandoc et visent √† le rendre plus simple √† prendre en main : les concepts sont les m√™mes mais ils devraient √™tre plus faciles √† utiliser, m√™me s'ils ne sont pas aussi vari√©s.

## Comment exp√©rimenter avec Pandoc ?

Une fois que tu sais que ton probl√®me vient de Pandoc, comment cr√©er un exemple reproductible ?
De mani√®re peut-√™tre surprenante, m√™me si c'est tr√®s bien de cr√©er un _reprex_ (exemple reproductible) Pandoc, tu *ne peux pas* le cr√©er avec le paquet reprex, parce que reprex utilise la machinerie R Markdown.

Dans ce billet, nous avons montr√© quelques exemples, en appelant Pandoc directement sur des cha√Ænes de caract√®res, ou sur [des fichiers temporaires cr√©√©s avec withr](#pandoc-101).

Voici le code Rmd habituel de Christophe, fourni en tant que [RStudio snippet](https://support.posit.co/hc/en-us/articles/204463668-Code-Snippets-in-the-RStudio-IDE):

```r
dir.create(tmp_dir <- tempfile())
owd <- setwd(tmp_dir)
xfun::write_utf8(c(
    "---",
    "title: test",
    "---",
    "",
    "# A header",
    ${1:""}
), "test.Rmd")
rmarkdown::render("test.Rmd", "${2:html_document}"${3})
setwd(owd)
unlink(tmp_dir, recursive = TRUE)
```

Dans tous les cas, comme pour tout reprex, il faudra le rendre minimal.

Pour d√©panner le comportement de Pandoc √† l'aide d'autres outils, voici quelques conseils utiles :

- Tu peux tester Pandoc dans ton navigateur sur [pandoc.org/try](https://pandoc.org/try/).

- Avec Quarto, tu peux acc√©der au Pandoc int√©gr√© avec la commande `quarto pandoc`.
  C'est comme si tu appelais `pandoc` directement, mais en utilisant la version fournie avec la version de Quarto que tu utilises.

- Avec R Markdown, [`rmarkdown::find_pandoc()`](https://pkgs.rstudio.com/rmarkdown/reference/find_pandoc.html) te permettra de savoir o√π se trouve le binaire Pandoc.
  Tu peux l'ex√©cuter dans un terminal, ou utiliser la famille de fonctions [`rmarkdown::pandoc_*`](https://pkgs.rstudio.com/rmarkdown/reference/index.html#pandoc).

- Dans R, le paquet pandoc peut t'aider √† ex√©cuter une version sp√©cifique, √† comparer entre les versions et √† isoler ton travail Pandoc.

Quel que soit l'outil que tu utilises, une fois que tu connais le num√©ro de version, tu peux ex√©cuter Pandoc lui-m√™me (√† partir de R avec le paquet pandoc, √† partir d'un terminal) en installant la bonne version.

## Suivre l'√©volution de Pandoc, ou √©pingler une version Pandoc !

Suivre l'√©volution de Pandoc n'est vraiment pas obligatoire et la lecture du _changelog_ (journal des modifications) pourrait √™tre difficile √† suivre sans une bonne compr√©hension du fonctionnement de Pandoc.
Tu *pourrais* t'abonner √† la [liste de diffusion Pandoc](https://groups.google.com/g/pandoc-announce).
Mais il se peut, rarement, que tu aies besoin de passer au peigne fin la [liste de modifications de Pandoc](https://pandoc.org/releases.html) lorsque tu remarqueras quelque chose d'anormal.

Fais attention √† la version de Pandoc que tu utilises localement et en int√©gration continue, surtout quand quelque chose ne fonctionne que sur ta machine.

Pour savoir quelle version de Pandoc tu utilises, tu peux utiliser...

- [`rmarkdown::pandoc_version()`](https://pkgs.rstudio.com/rmarkdown/reference/pandoc_available.html) qui renvoie la version utilis√©e par **rmarkdown**;
- `quarto pandoc --version` (dans une ligne de commande) qui renvoie la version interne √† Quarto ;
- [`pandoc::pandoc_version()`](https://cderv.github.io/pandoc/reference/pandoc_version.html) qui renvoie la version de Pandoc par d√©faut (la version active, g√©n√©ralement la plus r√©cente parmi les versions de Pandoc **install√©es avec le paquetage R**) ;
- [`pandoc::pandoc_system_version()`](https://cderv.github.io/pandoc/reference/system_pandoc.html) qui renvoie la version de `pandoc` trouv√©e dans PATH ;
- [`pandoc::pandoc_rstudio_version()`](https://cderv.github.io/pandoc/reference/rstudio_pandoc.html) qui renvoie la version de Pandoc inclue dans RStudio IDE (il peut s'agir d'une version diff√©rente de [`rmarkdown::pandoc_version()`](https://pkgs.rstudio.com/rmarkdown/reference/pandoc_available.html) qui peut √™tre celle de PATH ou de `RSTUDIO_PANDOC` ou de la variable d'environnement).

Alors oui, faire attention √† la version de Pandoc demande un peu d'attention.

Avec Quarto, c'est moins un probl√®me qu'avec R Markdown puisque Quarto √©pingle une version de Pandoc.
Dans le d√©veloppement R Markdown, le but est de bien fonctionner avec la derni√®re version de Pandoc tout en continuant √† fonctionner avec les versions plus anciennes.
Il est important de le comprendre car cela peut signifier que des syst√®mes diff√©rents peuvent obtenir des r√©sultats diff√©rents m√™me s'ils ont la m√™me version de R Markdown parce que la version de Pandoc n'est pas la m√™me.
Comme souvent avec R, il est pr√©f√©rable de [mettre √† jour r√©guli√®rement](https://bookdown.org/yihui/rmarkdown-cookbook/install-pandoc.html) sauf si tu as une raison particuli√®re de ne pas le faire.

Conseil particulier si tu construis quelque chose avec Pandoc sur un syst√®me d'int√©gration continue : √©pingle une version de Pandoc pour ta configuration de production (GitHub Actions workflow par exemple) afin qu'elle corresponde √† ton environnement de d√©veloppement local[^6].

[^6]: C'est aussi une strat√©gie que l'on peut utiliser avec Hugo lors de la construction d'un site web statique !
Cela permet de s'√©pargner bien des maux de t√™te.

Le paquet pandoc poss√®de √©galement des aides tr√®s pratiques de type withr pour ex√©cuter le code avec une version donn√©e de Pandoc : [`pandoc::local_pandoc_version()` et `pandoc::with_pandoc_version()`](https://cderv.github.io/pandoc/reference/with_pandoc_version.html); ainsi qu'un argument `version` dans [`pandoc::pandoc_convert()`](https://cderv.github.io/pandoc/reference/pandoc_convert.html).
Cette fonction sp√©ciale a pour but de faciliter les tests et le d√©bogage entre plusieurs versions de Pandoc !

## Au-del√† de la documentation officielle, au-del√† de Pandoc

Si la lecture de la documentation et l'exp√©rimentation ne te permettent pas d'arriver √† tes fins, que faire ?

- Les r√©ponses de John MacFarlane dans les questions GitHub peuvent √™tre instructives. Voir cet [exemple](https://github.com/jgm/pandoc/issues/6259#issuecomment-841859989).
- Tu pourrais parcourir, ou participer, √† la [liste de discussion Pandoc](https://groups.google.com/g/pandoc-discuss).
- Si ton probl√®me est li√© √† Pandoc pour R Markdown ou Quarto en particulier, rends-toi sur le [forum de la communaut√© Posit](https://community.rstudio.com/) ou dans leurs d√©p√¥ts Github respectifs.

Et si Pandoc n'est pas suffisant pour ton cas d'utilisation ?

- [Quarto](https://quarto.org/) est en fait une interface plus facile √† utiliser de Pandoc avec beaucoup de fonctionnalit√©s suppl√©mentaires et de nouveaux param√®tres par d√©faut pour am√©liorer Pandoc pour la publication scientifique. Donc en g√©n√©ral, si Pandoc n'est pas suffisant (ou difficile √† utiliser), va voir Quarto (qui a des projets, etc.). Utiliser Quarto avec des fichiers Markdown (.md) revient √† utiliser un Pandoc plus intelligent (pas de R, pas de calcul, seulement une conversion de texte).
- Tu pourrais *construire sur* Pandoc. Christophe recommande de se renseigner sur [les filtres Lua](https://pandoc.org/lua-filters.html). Voir [Filtres Lua pour Quarto](https://quarto.org/docs/extensions/filters.html); [Filtres Lua pour R Markdown](https://bookdown.org/yihui/rmarkdown-cookbook/lua-filters.html). Ma√´lle n'a pas encore appris √† les utiliser, et a tendance √† convertir les choses en HTML puis √† les analyser avec xml2[^7].
- Tu pourrais ouvrir une _feature request_ (demande de fonctionnalit√©) de Pandoc.
- Tu peux utiliser autre chose que Pandoc, comme le paquet [commonmark de Jeroen Ooms](https://docs.ropensci.org/commonmark/); ou le paquet [markdown de Yihui Xie](https://pkgs.rstudio.com/rmarkdown/articles/rmarkdown.html) ou le paquet [tinkr de Zhian Kamvar](https://docs.ropensci.org/tinkr/) qui utilisent commonmark.

[^7]: Bien que cela puisse faire en sorte que les flux de travail ressemblent au jeu [The incredible machine](https://en.wikipedia.org/wiki/The_Incredible_Machine_\(video_game\)).

## Conclusion

Dans ce billet, nous avons partag√© quelques ressources utiles pour d√©panner tes probl√®mes avec Pandoc.
Il est crucial de se rappeler que m√™me si cela peut sembler insurmontable, tes comp√©tences et ton vocabulaire Pandoc s'am√©lioreront avec la pratique, comme par exemple en [convertissant des documents Google](https://docs.ropensci.org/quartificate/) pour une coll√®gue ! :wink:

En tant qu'utilisateur¬∑rice de R, n'oublie pas que Pandoc soutient un grand nombre de tes outils de publication ; et qu'il existe un paquet R pratique pour interagir avec Pandoc : pandoc üéâ.

Si tu aimes jouer avec des fichiers de diff√©rents formats, tu pourrais aussi appr√©cier la lecture de cet article de blog sur [rtika](/blog/2018/04/25/rtika-introduction/) par Sasha Goodman.


