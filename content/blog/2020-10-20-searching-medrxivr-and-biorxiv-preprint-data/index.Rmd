---
title: Searching MedRxivr and Biorxiv Preprint Data
author:
  - Luke McGuinness
date: '2020-10-20'
slug: searching-medrxivr-and-biorxiv-preprint-data
categories:
  - blog
tags:
  - Software Peer Review
  - R
  - community
  - packages
  - medrxivr
  - medrxiv
  - biorxiv
  - systematic-reviews
  - bibliographic-database
  - evidence-synthesis
package_version: 0.0.3
description: A very short summary of your post (~ 100 characters)
twitterImg: blog/2019/06/04/post-template/name-of-image.png
output:
  html_document:
    keep_md: yes
---

```{r setup, include=FALSE}
library(medrxivr)
library(dplyr)
library(ggplot2)

# Options to have images saved in the post folder
# And to disable symbols before output
knitr::opts_chunk$set(fig.path = "", comment = "")

# knitr hook to make images output use Hugo options
knitr::knit_hooks$set(
  plot = function(x, options) {
    hugoopts <- options$hugoopts
    paste0(
      "{{<figure src=",
      '"', x, '" ',
      if (!is.null(hugoopts)) {
        glue::glue_collapse(
          glue::glue('{names(hugoopts)}="{hugoopts}"'),
          sep = " "
        )
      },
      ">}}\n"
    )
  }
)

# knitr hook to use Hugo highlighting options
knitr::knit_hooks$set(
  source = function(x, options) {
  hlopts <- options$hlopts
    paste0(
      "```r ",
      if (!is.null(hlopts)) {
      paste0("{",
        glue::glue_collapse(
          glue::glue('{names(hlopts)}={hlopts}'),
          sep = ","
        ), "}"
        )
      },
      "\n", glue::glue_collapse(x, sep = "\n"), "\n```\n"
    )
  }
)

```

**Add an image** by using a Hugo shortcode. The image is saved under `/content/blog/YYYY-MM-DD-slug/name-of-image.png`.

<!--html_preserve-->
{{< figure src = "name-of-image.png" width = "400" alt = "this is the alternative text" >}}
<!--/html_preserve-->

Consult the Technical Guidelines for tips on changing image size, alignment, and for advice on alternative text.

Below is another image, a plot generated by a code chunk, so you might see how to add alternative text and other options in this case. You can also use [all options documented for the figure shortcode](https://gohugo.io/content-management/shortcodes/#figure) except for `src` that will be created automatically when knitting.


**Embed a tweet** by using a Hugo shortcode. 

<!--html_preserve-->
{{< tweet 1138216112808529920 >}}
<!--/html_preserve-->


----

# Background & Motivation
[medRxiv](https://www.medrxiv.org/), as the preprint repository for papers in the medical, clinical, and related health sciences, has become a central source of new information related to the COVID-19 pandemic, and is a key source of new studies related to the COVID-19 pandemic. As a result, more and more researchers have begun to include medRxiv in the list of bibliographic databases they search as part of systematic reviews, a type of study that aims to find and bring together all available evidence on a topic in order to provide a comprehensive answer to a research question.

However, the native search functionality available on the medRxiv website is not suitable for use in systematic reviews, due to a number of limitations. These limitations, presented below, prompted the development of `medrxivr` R package which provides access to and tools for searching medRxiv preprint metadata. This post will summarize the key functionality of the packge with respect to two key use cases. Note that `medrxivr` allows users to access and search bioRxiv preprint data also, as both repositories are run by the Cold Spring Harbor Laboratory and so have a similar API endpoint, but all illustrating examples in this post are taken from medRxiv.

## Limitations of the native medRxiv website search functionality

### Confusing information about Boolean operators

A key limitation of the native search on the medRxiv website comes from the use of Boolean operators in search strings. Boolean operators (*AND*, *OR*, *NOT*) are used by librarians to combine individual search terms into specific complex search strings. For example, "(dementia OR alzheimer)" would be expected to return any record containing either "dementia" or "alzheimer". Combining this with a second topic via *AND*, e.g. "(dementia OR alzheimer) AND (lipid)", should return any record containing either "dementia" or "alzheimer" once it also contains the term "lipid".

One of the key assumptions of Boolean operators is that the order of the terms does not matter, i.e. that "(dementia OR alzheimer) AND lipids" is equivalent to "(alzheimer OR dementia) AND lipids". However, running these searches on the 13th Oct 2020, the first gives 133 results and the second gives 126. It is not clear what is happening behind the scenes, but there is potentially some weighting of terms based on proximity. This means that key records may be missed based on the arbitrary ordering of the search terms.

<br>

### Lack of reproducbility

One of the key tenets of systematic reviews is that literature searches are transparent and reproducible - that is, that a certain search strategy (e.g. "(dementia OR alzheimer) AND lipids") will provide the same number of results each time it is performed. However, anecdotal evidence from information specialists and medical librarians suggests this is not the case for the medRxiv native search:

<!--html_preserve-->
{{< tweet 1293973175244656641 >}}
<!--/html_preserve-->

<br>

### No batch export

Any systematic reviewer will tell you that for a database to be useful as an information source, the one thing it **needs** to have is an option to export the results of a given search _en masse_. At present, this is not something the medRxiv website supports:

<!--html_preserve-->
{{< tweet 1244905414019428353 >}}
<!--/html_preserve-->

<!--html_preserve-->
{{< tweet 1255485844783325185 >}}
<!--/html_preserve-->

<br>

This means that records returned by a search must be exported by hand in small batches, an error-prone and time-consuming (not to mention anger-inducing) method of extracting citations from a bibliographic database.

<br>

## Use cases

In light of these limitations, below are two key use cases for the `medrxivr` package.

### Use Case #1 – Get preprint metadata

The primary aim of `medrxivr` is to make it as easy as possible to get cleaned preprint metadata into R. This enables a range of exploratory analysis to be readily performed. For example, to explore the distribution of categories for preprints posted to medRxiv in the first week of this year, the following code is used:

``` {r categories, eval = FALSE}
# Import the data from the 
mx_data <- mx_api_content(from_date = "2020-01-01", to_date = "2020-01-07")

# Create the graph 
mx_data %>%
  group_by(category) %>%
  summarise(N = n(), .groups = "keep") %>%
  ungroup() %>%
  arrange(desc(N)) %>%
  ggplot(aes(y = reorder(category,N), x = N)) +
  geom_col(colour = "black") + 
  ylab("Category") +
  xlab("Number of preprints, 1st week of January 2020") +
  scale_x_continuous(expand = c(0, 0), limits = c(0,10)) +
  theme_classic() 
```

<!--html_preserve-->
{{< figure src = "categories-1.png" width = "400" alt = "Distribution of preprints posted to medRxiv in the first week of 2020 across topic categories." >}}
<!--/html_preserve-->

### Use Case #2 – Perform transparent and reproducible searches as part of a literature review, and export results

While importing data, as a systematic reviewer, my main interest is in what `medrxivr` allows you to do once you have imported it. As mentioned in the motivation section above, the native medRxiv search interface is neither accurate nor transparent. The second core aspect of `medrxivr`'s functionality is designed to address this, allowing information specialists to build complex searches and find records contained in the medRxiv databases that match the criteria. An example is given below, where a researcher is looking for records that contain both dementia-related and lipid-related terms:

``` {r}

# Use the maintained snapshot to quickly load today's copy of the medRxiv database
# Note - this could be saved in your project repo to ensure reproducibility
preprint_data <- mx_snapshot()

# Build your search
topic1  <- c("dementia","vascular","alzheimer's")  # Combined with Boolean OR
topic2  <- c("lipids","statins","cholesterol")     # Combined with Boolean OR
myquery <- list(topic1, topic2)                    # Combined with Boolean AND

# Run your search
results <- mx_search(data = preprint_data,
                     query = myquery)

```

Once you have run your search, exporting the results to a .BIB file for import into a reference manager, such as Zotero or Mendeley, is a simply as passing the results object to the `mx_export()` function.

Similarly, as screening through the full text PDFs of records returned by a search against eligibility criteria forms a key part of a systematic review, a second helper function downloads the PDF for each record returned by `mx_search()`. Again, it is simply a case of passing the `results` object to the `mx_download()` function.

## Conclusion

medRxiv is a fantastic resource and has been a key source of information related to the COVID-19 pandemic. However, some key issues with the website and mean that the native search functionality on the website precludes it's use in systematic reviews. The `medrxivr` R package seeks to address these limitations by providing a user-friendly way to import and systematically search medRxiv and bioRxiv records in R. Full documentation on the functionality, especially around the design of complex search strategies, is available from the [package website](https://docs.ropensci.org/medrxivr/).

[^1]: Rawlinson, C., & Bloom, T. (2019). New preprint server for medical research. BMJ, 365. <https://doi.org/doi:10.1136/bmj.l2301>

